<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>1.13 CommandAPI: Literal arguments</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">1.13 CommandAPI
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">An API for the command UI introduced in Minecraft 1.13</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_2_81_src_literalarguments.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Literal arguments </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Literal arguments are used to represent "forced options" for a command. For instance, take Minecraft's <code>/gamemode</code> command. The syntax consists of the following:</p>
<div class="fragment"><div class="line">/gamemode &lt;mode&gt; [player]</div>
</div><!-- fragment --><p>It consists of a gamemode, followed by an optional player argument. The list of gamemodes are as follows:</p>
<div class="fragment"><div class="line">/gamemode survival </div>
<div class="line">/gamemode creative</div>
<div class="line">/gamemode adventure</div>
<div class="line">/gamemode spectator</div>
</div><!-- fragment --><p>Unlike regular commands (as those implemented by Bukkit for example), these four options are "hardcoded" - they're not "suggestions". The user can <em>only</em> enter one of these four examples, no other values are allowed.</p>
<h1>Literal arguments vs regular arguments</h1>
<p>Unlike regular arguments that are shown in this chapter, the literal argument is <em>technically</em> not an argument. Due to this fact, the literal argument is <b>not</b> present in the <code>args[]</code> for the command declaration.</p>
<h2>Example - Literal arguments and regular arguments</h2>
<div class="fragment"><div class="line">LinkedHashMap&lt;String, Argument&gt; arguments = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</div>
<div class="line">arguments.put(<span class="stringliteral">&quot;literal&quot;</span>, <span class="keyword">new</span> LiteralArgument(<span class="stringliteral">&quot;hello&quot;</span>));</div>
<div class="line">arguments.put(<span class="stringliteral">&quot;text&quot;</span>, <span class="keyword">new</span> TextArgument());</div>
<div class="line"> </div>
<div class="line">CommandAPI.getInstance().register(<span class="stringliteral">&quot;mycommand&quot;</span>, arguments, (sender, args) -&gt; {</div>
<div class="line">    <span class="comment">/* This gives the variable &quot;text&quot; the contents of the </span></div>
<div class="line"><span class="comment">     * TextArgument, and not the literal &quot;hello&quot; */</span></div>
<div class="line">    String text = (String) args[0];</div>
<div class="line">});</div>
</div><!-- fragment --><p>As you can see from this example, when you retrieve <code>args[0]</code>, it returns the value of the <code>TextArgument</code> instead of the <code>LiteralArgument</code></p>
<h1>Example - Gamemode command using literal arguments</h1>
<p>This is a demonstration of how you could create a command similar to Minecraft's <code>/gamemode</code> command by using literal arguments. To do this, we are effectively registering 4 separate commands, each called <code>/gamemode</code>, but with different literal arguments.</p>
<div class="fragment"><div class="line"><span class="comment">//Create a map of gamemode names to their respective objects</span></div>
<div class="line">HashMap&lt;String, GameMode&gt; gamemodes = <span class="keyword">new</span> HashMap&lt;&gt;();</div>
<div class="line">gamemodes.put(<span class="stringliteral">&quot;adventure&quot;</span>, GameMode.ADVENTURE);</div>
<div class="line">gamemodes.put(<span class="stringliteral">&quot;creative&quot;</span>, GameMode.CREATIVE);</div>
<div class="line">gamemodes.put(<span class="stringliteral">&quot;spectator&quot;</span>, GameMode.SPECTATOR);</div>
<div class="line">gamemodes.put(<span class="stringliteral">&quot;survival&quot;</span>, GameMode.SURVIVAL);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Iterate over the map</span></div>
<div class="line"><span class="keywordflow">for</span>(String key : gamemodes.keySet()) {</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//Create our arguments as usual, using the LiteralArgument for the name of the gamemode</span></div>
<div class="line">    LinkedHashMap&lt;String, Argument&gt; arguments = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</div>
<div class="line">    arguments.put(key, <span class="keyword">new</span> LiteralArgument(key));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//Register the command as usual</span></div>
<div class="line">    CommandAPI.getInstance().register(<span class="stringliteral">&quot;gamemode&quot;</span>, arguments, (sender, args) -&gt; {</div>
<div class="line">        <span class="keywordflow">if</span>(sender instanceof Player) {</div>
<div class="line">            Player player = (Player) sender;</div>
<div class="line">            </div>
<div class="line">            <span class="comment">//Retrieve the object from the map via the key and NOT the args[]</span></div>
<div class="line">            player.setGameMode(gamemodes.get(key));</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line">}</div>
</div><!-- fragment --><h1>Literal argument warnings</h1>
<p>Literal arguments require a string in the constructor. If the literal is an empty String or is null, the CommandAPI will throw a <code>BadLiteralException</code>.</p>
<p>Because literal arguments are _"hardcoded"_, each literal is effectively mapped to a single command. This is shown when using the configuration option <code>create-dispatcher-json: true</code> which shows the JSON result of registered commands. For instance, take the <code>/defaultgamemode</code> command:</p>
<div class="fragment"><div class="line">&quot;defaultgamemode&quot;: {</div>
<div class="line">    &quot;type&quot;: &quot;literal&quot;,</div>
<div class="line">    &quot;children&quot;: {</div>
<div class="line">        &quot;adventure&quot;: {</div>
<div class="line">            &quot;type&quot;: &quot;literal&quot;,</div>
<div class="line">            &quot;executable&quot;: true</div>
<div class="line">        },</div>
<div class="line">        &quot;creative&quot;: {</div>
<div class="line">            &quot;type&quot;: &quot;literal&quot;,</div>
<div class="line">            &quot;executable&quot;: true</div>
<div class="line">        },</div>
<div class="line">        &quot;spectator&quot;: {</div>
<div class="line">            &quot;type&quot;: &quot;literal&quot;,</div>
<div class="line">            &quot;executable&quot;: true</div>
<div class="line">        },</div>
<div class="line">        &quot;survival&quot;: {</div>
<div class="line">            &quot;type&quot;: &quot;literal&quot;,</div>
<div class="line">            &quot;executable&quot;: true</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">},</div>
</div><!-- fragment --><p>Each option produces a new "command" in the tree of commands. This means that having exceptionally large lists of literals, or nested literals (e.g. <code>/command &lt;literal1&gt; &lt;literal2&gt;</code>) can cause very large trees which cannot be sent to the clients _(it can cause clients to crash)_.</p>
<blockquote class="doxtable">
<p><b>Developer's Note:</b></p>
<p>Take care when using literal arguments. If your list of arguments is exceptionally large, or contains many nested arguments, the server may be unable to send the command information to the client. If many command argument choices are required, consider using a <code>StringArgument</code> and using <code>.overrideSuggestions()</code> to create your own list of required arguments. </p>
</blockquote>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 26 2020 00:40:54 for 1.13 CommandAPI by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
