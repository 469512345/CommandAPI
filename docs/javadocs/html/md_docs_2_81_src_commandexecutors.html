<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>1.13 CommandAPI: Command executors</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">1.13 CommandAPI
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">An API for the command UI introduced in Minecraft 1.13</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_2_81_src_commandexecutors.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Command executors </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><blockquote class="doxtable">
<p><b>Developer's Note:</b></p>
<p>This section can be a little bit difficult to follow. If you only want the bare basic features _(executes a command)_, read the section below on <em>Normal command executors</em> - this behaves very similar to the <code>onCommand</code> method in Bukkit. </p>
</blockquote>
<hr  />
<p>The CommandAPI provides two separate command executors which are lambdas which execute the code you want when a command is called. These are the classes <code>CommandExecutor</code> _(Not to be confused with Bukkit's <code>CommandExecutor</code> class)_, which just runs the contents of a command, and <code>ResultingCommandExecutor</code> that returns an integral _(whole number)_ result.</p>
<blockquote class="doxtable">
<p><b>Developer's Note:</b></p>
<p>In general, you need not focus too much on what type of command executor to implement. If you know for certain that you're going to be using your command with command blocks, just ensure you return an integer at the end of your declared command executor. Java will infer the type _(whether it's a CommandExecutor or ResultingCommandExecutor)_ automatically, so feel free to return an integer or not. </p>
</blockquote>
<h1>Normal command executors</h1>
<p>Command executors are of the following format, where <code>sender</code> is a <a href="https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/command/CommandSender.html"><code>CommandSender</code></a>, and <code>args</code> is an <code>Object[]</code>, which represents arguments which are parsed by the CommandAPI.</p>
<div class="fragment"><div class="line">(sender, args) -&gt; {</div>
<div class="line">  <span class="comment">//Code here  </span></div>
<div class="line">};</div>
</div><!-- fragment --><p>With normal command executors, these do not need to return anything. By default, this will return a <em>success value</em> of 1 if it runs successfully, and a <em>success value</em> of 0 if it runs unsuccessfully, either by throwing an exception _(RuntimeException)_ or by forcing the command to fail.</p>
<h1>Forcing commands to fail</h1>
<p>Sometimes, you want your command to fail on purpose. This is basically the way to "gracefully" handle errors in your command execution. This is performed using the following method:</p>
<div class="fragment"><div class="line">CommandAPI.fail(<span class="stringliteral">&quot;Error message goes here&quot;</span>);</div>
</div><!-- fragment --><p>When the CommandAPI calls the fail method, it will cause the command to return a <em>success value</em> of 0, to indicate failure.</p>
<h2>Example - Command failing for element not in a list</h2>
<p>Say we have some list, <code>List&lt;String&gt;</code> containing a bunch of fruit and the player can choose from it. In order to do that, we can use a <code>StringArgument</code> and suggest it to the player using <code>.overrideSuggestions(String[])</code>. However, because this only lists <em>suggestions</em> to the player, it does <b>not</b> stop the player from entering an option that isn't on the list of suggestions.</p>
<p>Therefore, to gracefully handle this with a proper error message, we use <code>CommandAPI.fail(String)</code> with a meaningful error message which is displayed to the user.</p>
<div class="fragment"><div class="line"><span class="comment">//Array of fruit</span></div>
<div class="line">List&lt;String&gt; fruit = <span class="keyword">new</span> ArrayList&lt;&gt;();</div>
<div class="line">fruit.add(<span class="stringliteral">&quot;banana&quot;</span>);</div>
<div class="line">fruit.add(<span class="stringliteral">&quot;apple&quot;</span>);</div>
<div class="line">fruit.add(<span class="stringliteral">&quot;orange&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Argument accepting a String, suggested with the list of fruit</span></div>
<div class="line">LinkedHashMap&lt;String, Argument&gt; arguments = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</div>
<div class="line">arguments.put(<span class="stringliteral">&quot;item&quot;</span>, <span class="keyword">new</span> StringArgument().overrideSuggestions(fruit.toArray(<span class="keyword">new</span> String[fruit.size()])));</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Register the command</span></div>
<div class="line">CommandAPI.getInstance().register(<span class="stringliteral">&quot;getfruit&quot;</span>, arguments, (sender, args) -&gt; {</div>
<div class="line">    String inputFruit = (String) args[0];</div>
<div class="line">    <span class="keywordflow">if</span>(fruit.contains(inputFruit)) {</div>
<div class="line">        <span class="comment">//Do something with inputFruit</span></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">//The player&#39;s input is not in the list of fruit</span></div>
<div class="line">        CommandAPI.fail(<span class="stringliteral">&quot;That fruit doesn&#39;t exist!&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">});</div>
</div><!-- fragment --><blockquote class="doxtable">
<p><b>Developer's Note:</b></p>
<p>In general, it's a good idea to handle unexpected cases with the <code>CommandAPI.fail()</code> method. Most arguments used by the CommandAPI will have their own builtin failsafe system _(e.g. the <code>EntitySelectorArgument</code> will not execute the command executor if it fails to find an entity)_, so this feature is for those extra cases. </p>
</blockquote>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 26 2020 00:40:54 for 1.13 CommandAPI by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
