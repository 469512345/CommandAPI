<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>1.13 CommandAPI: Command registration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">1.13 CommandAPI
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">An API for the command UI introduced in Minecraft 1.13</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_2_81_src_commandregistration.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Command registration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>To register commands with the CommandAPI, there are several methods which can be used, depending on whether you want your command to have aliases or permissions in order to run it.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CommandRegistration method </th><th class="markdownTableHeadNone">Outcome  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CommandAPI.getInstance().register(String, LinkedHashMap, CommandExecutor)</code> </td><td class="markdownTableBodyNone">Basic command registration  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CommandAPI.getInstance().register(String, String[], LinkedHashMap, CommandExecutor)</code> </td><td class="markdownTableBodyNone">Register command with an array of aliases  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CommandAPI.getInstance().register(String, CommandPermission, LinkedHashMap, CommandExecutor)</code> </td><td class="markdownTableBodyNone">Register command which need certain permissions  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CommandAPI.getInstance().register(String, CommandPermission, String[], LinkedHashMap, CommandExecutor)</code> </td><td class="markdownTableBodyNone">Register command with aliases and permission requirements  </td></tr>
</table>
<p>The following fields are as follows:</p>
<ul>
<li><p class="startli"><code>String</code> - The command name</p>
<p class="startli">The first argument represents the command name which will be registered. For instance, to register the command <code>/god</code>, you would use the following:</p>
</li>
</ul>
<div class="fragment"><div class="line">CommandAPI.getInstance().register(<span class="stringliteral">&quot;god&quot;</span>, ...);</div>
</div><!-- fragment --><ul>
<li><p class="startli"><code>LinkedHashMap&lt;String, Argument&gt;</code> - The list of arguments</p>
<p class="startli">The CommandAPI requires a list of arguments which are used for the command. The argument map consists of a key which is the tooltip that is displayed as a prompt to users entering commands, and a value which is an instance of an argument (See the section on arguments). This list of arguments is interpreted in the <em>order that arguments are added to the LinkedHashMap</em>.</p>
</li>
<li><code>String[]</code> - An array of aliases that the command can be run via</li>
<li><code>CommandPermission</code> - The required permission to execute a command. (See the section on permissions).</li>
</ul>
<h1>Command loading order</h1>
<p>In order to register commands properly, <b>commands must be registered before the server finishes loading</b>. The CommandAPI will prevent command registration after the server has loaded. This basically means that all command registration must occur during a plugin's <code>onLoad()</code> or <code>onEnable()</code> method. With the CommandAPI, depending on which of these functions you load your commands is crutial if your plugin is used with Minecraft's functions.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">When to load </th><th class="markdownTableHeadNone">What to do  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>onLoad()</code> method </td><td class="markdownTableBodyNone">Register commands to be used in Minecraft functions (see Function section for more info)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>onEnable()</code> method </td><td class="markdownTableBodyNone">Register regular commands  </td></tr>
</table>
<h1>Command unregistration</h1>
<p>The CommandAPI has support to unregister commands completely from Minecraft's command list. This includes Minecraft built in commands!</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method </th><th class="markdownTableHeadNone">Result  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CommandAPI.getInstance().unregister(String cmd)</code> </td><td class="markdownTableBodyNone">Unregisters a command from the game  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>CommandAPI.getInstance().unregister(String cmd, boolean force)</code> </td><td class="markdownTableBodyNone">Attempts to unregister a command from the game by force. This includes <code>/minecraft:cmd</code>, <code>/bukkit:cmd</code> and <code>/spigot:cmd</code> commands as well.  </td></tr>
</table>
<h2>Example - Replacing Minecraft's <code>/gamemode</code> command</h2>
<p>To replace a command, we can first unregister it and then register our implementation of that command.</p>
<div class="fragment"><div class="line"><span class="comment">//Unregister the gamemode command from the server (by force)</span></div>
<div class="line">CommandAPI.getInstance().unregister(<span class="stringliteral">&quot;gamemode&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">LinkedHashMap&lt;String, Argument&gt; arguments = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Arguments for the gamemode command. In this sample, I&#39;m just </span></div>
<div class="line"><span class="comment"> * using a simple literal argument which allows for /gamemode survival */</span></div>
<div class="line">arguments.put(<span class="stringliteral">&quot;gamemode&quot;</span>, <span class="keyword">new</span> LiteralArgument(<span class="stringliteral">&quot;survival&quot;</span>));</div>
<div class="line"> </div>
<div class="line">CommandAPI.getInstance().register(<span class="stringliteral">&quot;gamemode&quot;</span>, arguments, (sender, args) -&gt; {</div>
<div class="line">    <span class="comment">//Implementation of our /gamemode command</span></div>
<div class="line">});</div>
</div><!-- fragment --><blockquote class="doxtable">
<p><b>Developer's Note:</b></p>
<p>Command unregistration, although powerful, is highly unrecommended. It is the CommandAPI's most "dangerous" feature as it can cause unexpected sideffects, such as command blocks executing commands you wouldn't expect them to. In almost every case, I'd recommend just creating a new command instead of unregistering one to replace it.</p>
<p>For instance, instead of unregistering <code>/gamemode</code>, you could register a command <code>/gm</code> or <code>/customgamemode</code>. </p>
</blockquote>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 26 2020 00:40:54 for 1.13 CommandAPI by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
